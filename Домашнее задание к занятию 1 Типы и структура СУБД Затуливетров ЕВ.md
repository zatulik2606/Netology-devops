**Домашнее задание к занятию 1. «Типы и структура СУБД»**


**Задача 1**

*Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных.*

*Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:*

*электронные чеки в json-виде,*

Подойдет NoSQL, например MongoDB, т.к. это документо-риентированная БД и в качестве исходников будут json файлы.


*склады и автомобильные дороги для логистической компании,*

Подойдет сетевая база данных с множеством различных узлов каждый из которых необходим для решения своей задачи и хранения необходимых данных.


*генеалогические деревья,*

Подойдет любая реляционная БД. Т.к. в этой схеме множество связей.


*кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,*


Подойдет NoSQД  БД, т.к. она обеспечит быструю работу за счет кэширования. Например, Memcached.


*отношения клиент-покупка для интернет-магазина.*

Для решения таких задач требуется реляционная БД. Потому что в этой БД есть ключи по которым проще строить сам каталог.


*Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.*

***

**Задача 2**

*Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):*

*данные записываются на все узлы с задержкой до часа (асинхронная запись);*

По CAP = AP асинхронная запись не может дать гарантию консистентности данных.

По PACELC теореме вероятно PA/EL, т.к. задержки в один час ,предположительно,будет достаточно чтобы устранить небольшие сетевые проблемы.

*при сетевых сбоях система может разделиться на 2 раздельных кластера;*

По CAP = AP при сетевых сбоях, система может разделиться на 2 раздельных кластера AP обеспечивается доступность и устойчивость .
По PACELC = PA/EL  система может разделиться на 2 раздельных кластера 

*система может не прислать корректный ответ или сбросить соединение.*

По CAP=CP, т.к. условие доступности требует, чтобы запрос всегда завершался корректным ответом.
По PACELC= PC/EC, система может не прислать корректный ответ или сбросить соединение

*Согласно PACELC-теореме как бы вы классифицировали эти реализации?*

***

**Задача 3**

*Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?*

Нет. Это противоречит базовым принципам. BASE ориентирован на производительность системы (доступность), ACID на сохранность данных(стойкость к разделению и сохранность данных). Согласно CAP-теореме системы с такими качествами будут находиться на разных ребрах треугольника.

***
**Задача 4**
*Вам дали задачу написать системное решение, основой которого бы послужили:*

*фиксация некоторых значений с временем жизни,*

*реакция на истечение таймаута.*

*Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора этой системы?*


Это система Redis. 


Из минусов:


*1. Если хотите повысить надженость, то необходимо увеличивать количестов реплик. Увеличение количества реплик ведет к удорожанию стоимости проекта.*


*2. В системе не заложены rollbask, т.к. это сказывается на производительности системы.*


*3. Отказ от очереди команд. Не то , чтобы недостаток, но при сбое никакие команды не выполняются*


*4. Недостаток RBD, как я и писал ранее, в том ,что при неожиданном выходе из строя оборудования, к примеру отключение электроэнергии, приведет к тому ,что часть данных между "слепками", будет утерняна*


*5. Недостаток AOF( речь идет о записи на диск)   - файлы м.б. больше в сравнени с RDB, может быть медленнее, чем RDB, в зависимости от конкретной политики fsync.( второй фактор можно исправить настроив fsync)*


*6. В Pub/sub используется режим доставки **at-most-once message** .На практике это означает ,что подписчик может потерять сообщение , если произошел неожиданный сбой ( но, все можно настроить через стримы и режимы at-most-once as well as at-least-once delivery*


*а в целом система вполне себе надежная.*

***

